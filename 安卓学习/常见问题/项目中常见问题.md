**项目中常见问题**

# 一、配置和修改AS缓存路径

1.修改.android和.AndroidStudio相关的缓存路径可以参考 

https://blog.csdn.net/xx326664162/article/details/52004676 

2.让安卓使用自己下载的gradle 

①通过环境变量的方式，gradle会读取环境变量，所有的项目都会自动修改过来，非常方便。打开环境 

变量设置方法如图(win10下用快捷键win+Q呼出小娜,其他版本可以进控制面板查找到系统->高级系统设置)



②在以下文件里面修改我们所需gradle版本号



③关掉AS（此时gradle已经为我们构建好了gradle的层级目录，但还没下好对应gradle），然后去我们更改的gradle缓存目录下添加我们下载好的gradle 



④打开AS重新构建项目，成功即可 

# 二、Manifest出现屎黄色

在module的build.gradle的android{}里面添加 

```groovy
android{ 
    lintOptions { 
        disable 'GoogleAppIndexingWarning' 
    } 
}	
```

# 三、drawable和mipmap

**drawable和mipmap**

https://blog.csdn.net/userzhanghao123/article/details/70243872 

手机屏幕适配和mipmap详解 

https://blog.csdn.net/lantiankongmo/article/details/50549128 

# 四、安装Apk出现问题 

新版本Android Studio运行APK时，出现DELETE_FAILED_INTERNAL_ERROR， Error while Installing 

APKs如何解决。 

有一种方法：打开settings，找到Build>Instant Run,把右边的勾去掉，再次尝试安装。 

![1618651042743](D:\typora\图片\1618651042743.png)

# 五、解决build running速度慢的问题

在 .gradle目录下新建一个文件名为gradle.properties的文件 



添加以下内容 

```properties
org.gradle.daemon=true
```



**性能优化参考：** 

https://www.jianshu.com/p/d4790161c6e3 

切记，如果需要更新依赖或者下载虚拟机，最好不要勾选offline work 

# 六、AS扫描不到外部设备，无法在真机上运行 

1.在SDK manager里面下载google usb driver 



2.在资源管理器更新ADB INTERFACE驱动，并且选择在本地计算机上扫描，然后找到下载的USB Driver 文件夹，进行安装更新 

3.在安卓手机上：设置-》关于手机-》连续点击版本号会开启开发者模式 

然后在开发者模式选项里面开启USB调试即可 

（https://jingyan.baidu.com/article/c275f6ba71db93e33d75672b.html）



# 七、编译失败

添加国内镜像

```groovy
// Top-level build file where you can add configuration options common to all sub-projects/modules.
buildscript {
    repositories {
        maven { url 'https://maven.aliyun.com/repository/public' }
        maven { url 'https://maven.aliyun.com/repository/public' }
        maven { url 'https://maven.aliyun.com/repository/google' }
        maven { url 'https://maven.aliyun.com/repository/gradle-plugin' }
 
        google()
        mavenCentral()
        jcenter()
    }
    dependencies {
        classpath "com.android.tools.build:gradle:7.0.2"
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:1.5.20"
 
    }
}
 
 
 
task clean(type: Delete) {
    delete rootProject.buildDir
}

```

> 其他可能原因——https://blog.csdn.net/Asgard_Hu/article/details/130060484

## 2.Installed Build Tools revision 34.0.0 is corrupted. Remove and install again using the SDK Manager.

> **参考：**
>
>  [2022年最优解决方案Installed Build Tools revision 31.0.0 is corrupted_unity build-tool 31.0.0 is missing dx](https://blog.csdn.net/wq6ylg08/article/details/121882199) 

根据构建报错信息"34.0.0版本的构建工具缺少了`DX文件`"，以及StackOverflow的解决方案发现，34.0.0版本的构建工具缺少了"dx"和"dx.jar"这两文件，正确的做法就是复制对应路径的"d8"和"d8.jar"这两文件创建副本，并分别改名为"dx"和"dx.jar"，"d8"和"d8.jar"这两文件的大致路径为：

```
{path}\Android\Sdk\build-tools\34.0.0\d8
{path}\Android\Sdk\build-tools\34.0.0\lib\d8.jar
```



